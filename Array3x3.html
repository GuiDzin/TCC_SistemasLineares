<!DOCTYPE html>
<html>
<head>
	<title>Sistema 3x3</title>
	<link rel="stylesheet" type="text/css" href="style/estiloArray.css">
</head>
<body>

	<div class="title">
		<h1>Solução de Sistemas 3x3</h1>  
		<h3 id="po">Segundo: Insira os coeficientes</h3>
	</div>

	<div class="container">
		<form class="input" action="index.html" method="post">

			<input type="text" name="array[]" placeholder="0"  class="v1" /><label>X +</label>
			<input type="text" name="array[]" placeholder="0"  class="v2" /><label>Y +</label> 
			<input type="text" name="array[]" placeholder="0"  class="v3" /><label>Z</label><label>   =</label>
			<input type="text" name="array[]" placeholder="0"  class="v4" /><br>

			<input type="text" name="array[]" placeholder="0"  class="v5" /><label>X +</label>
			<input type="text" name="array[]" placeholder="0"  class="v6" /><label>Y +</label> 
			<input type="text" name="array[]" placeholder="0"  class="v7" /><label>Z</label><label>   =</label>
			<input type="text" name="array[]" placeholder="0"  class="v8" /><br>

			<input type="text" name="array[]" placeholder="0"  class="v9" /><label>X +</label>
			<input type="text" name="array[]" placeholder="0"  class="v10" /><label>Y +</label> 
			<input type="text" name="array[]" placeholder="0"  class="v11" /><label>Z</label><label>   =</label>
			<input type="text" name="array[]" placeholder="0"  class="v12" /><br>


			<button type="button" name="button" onclick="resolver()">
				Calcular
			</button>
		</form>		
	</div>
	

	<div class="table">
		
		<div class="ajuste">
			<h2 id="Aumentada"></h2>
			<table id="tg" style="border: 2px solid transparent">
				<tbody>
					<tr>
						<td id="r1"></td>
						<td id="r2"></td>
						<td id="r3"></td>
						<td id="r4"></td>
					</tr>
				</tbody>
				<tbody>
					<tr>
						<td id="r5"></td>
						<td id="r6"></td>
						<td id="r7"></td>
						<td id="r8"></td>
					</tr>
				</tbody>
				<tbody>
					<tr>
						<td id="r9"></td>
						<td id="r10"></td>
						<td id="r11"></td>
						<td id="r12"></td>
					</tr>
				</tbody>
			</table>			
		</div>

		<div class="ajuste">
			<h2 id="Escalonada"></h2>
			<table id ="tf" style="border: 2px solid transparent">
				<tbody>
					<tr>
						<td id="e1"></td>
						<td id="e2"></td>
						<td id="e3"></td>
						<td id="e4"></td>
					</tr>
				</tbody>
				<tbody>
					<tr>
						<td id="e5" style="color: rgb(0,255,184)"></td>
						<td id="e6"></td>
						<td id="e7"></td>
						<td id="e8"></td>
					</tr>
				</tbody>
				<tbody>
					<tr>
						<td id="e9"  style="color: rgb(0,255,184)"></td>
						<td id="e10" style="color: rgb(0,255,184)"></td>
						<td id="e11"></td>
						<td id="e12"></td>
					</tr>
				</tbody>
			</table>			
		</div>

		<div class="resposta">
			<h2 id="solucao"></h2>
			<h3 id="solucaoX"></h3>
			<h3 id="solucaoY"></h3>
			<h3 id="solucaoZ"></h3>
		</div>   
		
	</div> 

	<div class = "voltar">
		<a href="Index.html">Voltar</a>
	</div>


	<script type="text/javascript">
		function resolver(){

    		//Recuperar valores inseridos 
    		var a = parseFloat(document.querySelector(".v1").value);
    		var b = parseFloat(document.querySelector(".v2").value);
    		var c = parseFloat(document.querySelector(".v3").value);
    		var d = parseFloat(document.querySelector(".v4").value);
    		var e = parseFloat(document.querySelector(".v5").value);
    		var f = parseFloat(document.querySelector(".v6").value);
    		var g = parseFloat(document.querySelector(".v7").value);
    		var h = parseFloat(document.querySelector(".v8").value);
    		var i = parseFloat(document.querySelector(".v9").value);
    		var j = parseFloat(document.querySelector(".v10").value);
    		var k = parseFloat(document.querySelector(".v11").value);
    		var l = parseFloat(document.querySelector(".v12").value);

        	//Iniciando Matriz Original e Matriz Temporária
        	var matriz = [ [a,b,c,d],
        	[e,f,g,h],
        	[i,j,k,l] ];

        	var temp = [ [0,0,0,0],
        	[0,0,0,0],
        	[0,0,0,0] ];

           	//Inverte a matriz se "a" = 0
           	if(matriz[0][0] == 0){
           		temp[0][0] = matriz[1][0];	matriz[1][0] = matriz[0][0]; matriz[0][0] = temp[0][0];
           		temp[0][1] = matriz[1][1];	matriz[1][1] = matriz[0][1]; matriz[0][1] = temp[0][1];
           		temp[0][2] = matriz[1][2];	matriz[1][2] = matriz[0][2]; matriz[0][2] = temp[0][2];
           		temp[0][3] = matriz[1][2];	matriz[1][3] = matriz[0][3]; matriz[0][3] = temp[0][3];
           	}

           	//Escreve a matriz
           	document.getElementById("Aumentada").innerHTML = "Matriz Aumentada: ";
           	document.getElementById("r1").innerHTML = matriz[0][0];
           	document.getElementById("r2").innerHTML = matriz[0][1];
           	document.getElementById("r3").innerHTML = matriz[0][2];
           	document.getElementById("r4").innerHTML = matriz[0][3];
           	document.getElementById("r5").innerHTML = matriz[1][0];
           	document.getElementById("r6").innerHTML = matriz[1][1];
           	document.getElementById("r7").innerHTML = matriz[1][2];
           	document.getElementById("r8").innerHTML = matriz[1][3];
           	document.getElementById("r9").innerHTML = matriz[2][0];
           	document.getElementById("r10").innerHTML = matriz[2][1];
           	document.getElementById("r11").innerHTML = matriz[2][2];
           	document.getElementById("r12").innerHTML = matriz[2][3];

            //Calculo dos Determinantes 
            const det = ((matriz[0][0]*matriz[1][1]*matriz[2][2])+(matriz[0][1]*matriz[1][2]*matriz[2][0])+(matriz[0][2]*matriz[1][0]*matriz[2][1]))-((matriz[0][2]*matriz[1][1]*matriz[2][0])+(matriz[0][0]*matriz[1][2]*matriz[2][1])+(matriz[0][1]*matriz[1][0]*matriz[2][2]));
            const det2a = ((matriz[0][3]*matriz[1][1]*matriz[2][2])+(matriz[0][1]*matriz[1][2]*matriz[2][3])+(matriz[0][2]*matriz[1][3]*matriz[2][1]))-((matriz[0][2]*matriz[1][1]*matriz[2][3])+(matriz[0][3]*matriz[1][2]*matriz[2][1])+(matriz[0][1]*matriz[1][3]*matriz[2][2]));
            const det2b = ((matriz[0][0]*matriz[1][3]*matriz[2][2])+(matriz[0][3]*matriz[1][2]*matriz[2][0])+(matriz[0][2]*matriz[1][0]*matriz[2][3]))-((matriz[0][2]*matriz[1][3]*matriz[2][0])+(matriz[0][0]*matriz[1][2]*matriz[2][3])+(matriz[0][3]*matriz[1][0]*matriz[2][2]));
            const det2c = ((matriz[0][0]*matriz[1][1]*matriz[2][3])+(matriz[0][1]*matriz[1][2]*matriz[2][0])+(matriz[0][3]*matriz[1][0]*matriz[2][1]))-((matriz[0][3]*matriz[1][1]*matriz[2][0])+(matriz[0][0]*matriz[1][3]*matriz[2][1])+(matriz[0][1]*matriz[1][0]*matriz[2][3]));

            //Verificando possibilidade de resolução
            if(det != 0){

            	//Coeficientes de conversão
            	const coef_10 = -1.0 * matriz[1][0] / matriz[0][0];
            	const coef_20 = -1.0 * matriz[2][0] / matriz[0][0];

            	//Escalonamento
            	for (j = 0; j < 4; j++) {
            		matriz[1][j] = (parseFloat(matriz[1][j]) + (parseFloat(coef_10) * parseFloat(matriz[0][j]))).toFixed(2);
            		matriz[2][j] = (parseFloat(matriz[2][j]) + (parseFloat(coef_20) * parseFloat(matriz[0][j]))).toFixed(2);
            	}

            	const coef_21 = -1.0 * matriz[2][1] / matriz[1][1];
            	for (j = 1; j < 4; j++) {    
            		matriz[2][j] =  (parseFloat(matriz[2][j]) + (parseFloat(coef_21) * parseFloat(matriz[1][j]))).toFixed(2);
            	}

            	//Escreve a matriz Escalonada
            	document.getElementById("Escalonada").innerHTML = "Matriz Escalonanda: ";
            	document.getElementById("e1").innerHTML = matriz[0][0];
            	document.getElementById("e2").innerHTML = matriz[0][1];
            	document.getElementById("e3").innerHTML = matriz[0][2];
            	document.getElementById("e4").innerHTML = matriz[0][3];
            	document.getElementById("e5").innerHTML = matriz[1][0];
            	document.getElementById("e6").innerHTML = matriz[1][1];
            	document.getElementById("e7").innerHTML = matriz[1][2];
            	document.getElementById("e8").innerHTML = matriz[1][3];
            	document.getElementById("e9").innerHTML = matriz[2][0];
            	document.getElementById("e10").innerHTML = matriz[2][1];
            	document.getElementById("e11").innerHTML = matriz[2][2];
            	document.getElementById("e12").innerHTML = matriz[2][3];

            	//Calculo das soluções
            	const solucaoZ = ((matriz[2][3]) / matriz[2][2]).toFixed(2);
            	const solucaoY = ((matriz[1][3] - (solucaoZ * matriz[1][2])) / matriz[1][1]).toFixed(2);
            	const solucaoX = ((matriz[0][3] - (solucaoZ * matriz[0][2]) - (solucaoY * matriz[0][1])) / matriz[0][0]).toFixed(2);

            	//Escreve as soluções 
            	document.getElementById("solucao").innerHTML = "Solução do Sistema: ";
            	document.getElementById("solucaoX").innerHTML = "X = " + solucaoX;
            	document.getElementById("solucaoY").innerHTML = "; Y = " + solucaoY;
            	document.getElementById("solucaoZ").innerHTML = "; Z = " + solucaoZ;

            } else if ((det == 0) && ((det2a != 0) || (det2b != 0) || (det2c != 0))){
            	
            	document.getElementById("Escalonada").innerHTML = "Matriz Escalonanda: ";
            	document.getElementById("e1").innerHTML = "-";
            	document.getElementById("e2").innerHTML = "-";
            	document.getElementById("e3").innerHTML = "-";
            	document.getElementById("e4").innerHTML = "-";
            	document.getElementById("e5").innerHTML = "-";
            	document.getElementById("e6").innerHTML = "-";
            	document.getElementById("e7").innerHTML = "-";
            	document.getElementById("e8").innerHTML = "-";
            	document.getElementById("e9").innerHTML = "-";
            	document.getElementById("e10").innerHTML = "-";
            	document.getElementById("e11").innerHTML = "-";
            	document.getElementById("e12").innerHTML = "-";

            	
            	document.getElementById("solucao").innerHTML = "Solução do Sistema: ";
            	document.getElementById("solucaoX").innerHTML =	"O Sistema é Impossivel (SI)";
            	document.getElementById("solucaoY").innerHTML = " ";
          		document.getElementById("solucaoZ").innerHTML = " ";

            } else if (det == 0){

            	document.getElementById("Escalonada").innerHTML = "Matriz Escalonanda: ";
            	document.getElementById("e1").innerHTML = "-";
            	document.getElementById("e2").innerHTML = "-";
            	document.getElementById("e3").innerHTML = "-";
            	document.getElementById("e4").innerHTML = "-";
            	document.getElementById("e5").innerHTML = "-";
            	document.getElementById("e6").innerHTML = "-";
            	document.getElementById("e7").innerHTML = "-";
            	document.getElementById("e8").innerHTML = "-";
            	document.getElementById("e9").innerHTML = "-";
            	document.getElementById("e10").innerHTML = "-";
            	document.getElementById("e11").innerHTML = "-";
            	document.getElementById("e12").innerHTML = "-";

            	document.getElementById("solucao").innerHTML = "Solução do Sistema: ";
            	document.getElementById("solucaoX").innerHTML =	"O Sistema é Possivel, porém Indeterminado (SPI)";		
            	document.getElementById("solucaoY").innerHTML = " ";
          		document.getElementById("solucaoZ").innerHTML = " ";
            }

            //"Cria" a matriz
            document.getElementById("tg").style.borderLeft = "2px solid white";
            document.getElementById("tg").style.borderRight = "2px solid white";

            document.getElementById("tf").style.borderLeft = "2px solid white";
            document.getElementById("tf").style.borderRight = "2px solid white";

        }

    </script>

</body>
</html>